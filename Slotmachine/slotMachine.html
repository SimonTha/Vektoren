<!Doctype html>
<html>
<script src="https://cdn.jsdelivr.net/npm/p5"></script>
<script>
let slotSize, slotx, sloty;
let kienerImg, deviousImg, blackImg, sukaImg, walImg, yannisImg, bobsImg, nonneImg, alenImg, triangleImg, carusoImg, fatguyImg, abdullahImg, curlyImg, images;
let imgMarging, randomImg1, randomImg2, randomImg3;
let negrito = 0;
let balance = 4000;
let check = true;

function preload(){
images = [
	kienerImg = loadImage("rsc/images/Kiener.png"),
	yannisImg = loadImage("rsc/images/yannis.png"),
	blackImg = loadImage("rsc/images/black.png"),
	deviousImg = loadImage("rsc/images/devious.png"),
	walImg = loadImage("rsc/images/wal.png"),
	nonneImg = loadImage("rsc/images/nonne.png"),
	alenImg = loadImage("rsc/images/alen.png"),
	triangleImg = loadImage("rsc/images/triangle.png"),
	carusoImg = loadImage("rsc/images/caruso.png"),
	hendersonImg = loadImage("rsc/images/henderson.png"),
	fatguyImg = loadImage("rsc/images/fatguy.png"),
	abdullahImg = loadImage("rsc/images/abdullah.png"),
	curlyImg = loadImage("rsc/images/curly.png")]
}

function setup(){
	let canvas = createCanvas(windowWidth, windowHeight);
	canvas.position(0,0);
	
	slotSize = width/9
	slotx = width/3;
	sloty = height/2 - slotSize/2
	
	imgMarging = 5;
	randomImg1 = 1
	randomImg2 = 1
	randomImg3 = 1
}

function draw(){
	if(negrito == 0){
		background(0);
	}else{
		background("red")
	}
	drawMachine();
	drawImages();
	if(negrito > 0){
		negrito--;
	}
	fill(255)
	textSize(20)
	text("Balance: " + balance, 0, 20)
	win();
	
	if(keyIsDown(65)){
	    if(negrito == 0){
		balance -= 3
		randomImg1 = round(random()*(images.length - 1));
		randomImg2 = round(random()*(images.length - 1));
		randomImg3 = round(random()*(images.length - 1));
		negrito = 0;
		check = true;
	}
	}
}

function drawMachine(){
	rect(slotx, sloty, slotSize, slotSize);
	rect(slotx + slotSize, sloty, slotSize, slotSize);
	rect(slotx + slotSize * 2, sloty, slotSize, slotSize);
}

function drawImages(){
	image(images[randomImg1], slotx + imgMarging, sloty + imgMarging, slotSize - imgMarging*2, slotSize - imgMarging*2)
	image(images[randomImg2], slotx + imgMarging + slotSize, sloty + imgMarging, slotSize - imgMarging*2, slotSize - imgMarging*2)
	image(images[randomImg3], slotx + imgMarging + slotSize*2, sloty + imgMarging, slotSize - imgMarging*2, slotSize - imgMarging*2)
}

function mouseClicked(){
	if(negrito == 0){
		balance -= 3
		randomImg1 = round(random()*(images.length - 1));
		randomImg2 = round(random()*(images.length - 1));
		randomImg3 = round(random()*(images.length - 1));
		negrito = 0;
		check = true;
	}
}

function win(){
	if(randomImg1 == randomImg2 && randomImg2 == randomImg3&& check){
		balance += 1000
		check = false
		negrito = 50;
	}
}

</script>
</html>